{% macro toggle() %}
	<div class="h-12 w-24 rounded-3xl border border-color border-[3px] transition-colors border-rose-400 dark:border-rose-300 
		flex items-center px-1
		cursor-pointer relative"
		onclick="toggle(this);">
		<div class="h-[2rem] w-[2rem] rounded-3xl bg-rose-400 dark:bg-rose-300
			transition-transform dark:translate-x-[3.2rem]" >
			<div class="dark:hidden w-full h-full flex place-content-center right-4">
				<i class="justify-center items-center w-full h-full text-rose-50
					fa-solid fa-sun fa-lg"></i>
			</div>
			<div class="dark:flex hidden w-full h-full place-content-center left-4">
				<i class="justify-center items-center w-full h-full 
					fa-solid fa-moon fa-lg"></i>
			</div>
		</div>
	</div>
{% endmacro %}
<!doctype html>
<html class="dark" >
<head >
	<title>Cambucha</title>
	<link href="/static/tailwind.css" rel="stylesheet" type="text/css" />
	<style>
		:root {
			--fa-display: flex;
		}
	</style>
	<script src="/static/htmx.min.js"></script>
	<script src="https://unpkg.com/htmx.org/dist/ext/json-enc.js"></script>
	<script src="https://kit.fontawesome.com/6cf318b276.js" crossorigin="anonymous"></script>
	<script>
		function toggle(sender) {
			let documentClass = document.documentElement.classList;
			if(documentClass.value == "dark")
				documentClass.remove("dark");
			else
				documentClass.add("dark");
		}

		function displayText(sender, sentText) {
			var text = sentText;
			console.log(text);
			var index = 1;
			var consoleTyper = setInterval(function() {
				sender.innerHTML = text.substring(0, index);
				if(text.length <= index)
				{
					sender.classList.add("opacity-0");
					sender.addEventListener('transitionend', () => handleTransitionEnd(sender));
					clearInterval(consoleTyper);
					return;
				}
				index += 1;
			}, 50);
		}

		function handleTransitionEnd(sender) {
			console.log(sender, sender.style.opacity);
			let firstComputedStatus = window.getComputedStyle(sender);
			if (firstComputedStatus.getPropertyValue("opacity") == 0) {
				setTimeout(() => {
					let currentComputedStatus = window.getComputedStyle(sender);
					if(currentComputedStatus.getPropertyValue("opacity") == 0) {
						sender.remove();
					}
				}, 1000);
			}
		}

		window.onload = () => {
			let t1 = document.getElementById("t1");
			let t2 = document.getElementById("t2");
			console.log(t1, t2);
			displayText(t1, "Hello, world!");
			displayText(t2, "Lorem Ipsum");
		}

	</script>
</head>
<body class="w-screen h-screen flex flex-col overflow-x-hidden relative transition-colors bg-white dark:bg-slate-800">
	<div class="relative w-full h-full overflow-y-auto ">
		<div class="absolute top-0 right-0 h-32 w-32 pt-4 pr-4">
			{{ toggle() }}
		</div>
		<div class="h-screen w-full justify-center items-center flex relative">
				<h1 class="dark:text-white text-7xl" id="welcome-text">
					I'm Camilo,
					</br>
					Welcome to my website...
				</h1>
				<div id="t1" class="absolute top-8 left-8 dark:text-white transition-opacity duration-[4000ms] hover:opacity-100" ></div>
				<div id="t2" class="absolute bottom-8 right-68 dark:text-white transition-opacity duration-[4000ms] hover:opacity-100" ></div>
		</div>
	</div>
</body>
</html>
